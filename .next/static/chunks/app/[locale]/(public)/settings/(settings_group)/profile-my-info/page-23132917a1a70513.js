(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3392],{93735:function(e,r,a){Promise.resolve().then(a.bind(a,97867)),Promise.resolve().then(a.bind(a,31085)),Promise.resolve().then(a.bind(a,62220))},51817:function(e,r,a){"use strict";a.d(r,{Z:function(){return l}});let l=(0,a(79205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},62220:function(e,r,a){"use strict";a.d(r,{default:function(){return z}});var l=a(57437),i=a(12381),n=a(80670),t=a(40279),s=a(75060),d=a(2265),c=a(29501),o=a(86700),u=a(74291),m=a(23340),x=a(21770);a(83079);var f=a(12119),h=(0,f.$)("6a695ff852ad0216609569f4a057c39608029166"),p=(0,f.$)("ff7fd6d8f1542889e5d6b5f1c7a6d1456bad0807"),v=a(51817),j=a(80605),_=a(42586),b=()=>{let e=(0,_.useTranslations)(),{toast:r}=(0,m.pm)(),{isPending:a,mutateAsync:n}=(0,x.D)({mutationFn:()=>h()}),t=async()=>{let a=await n();200===a.status?(r({title:e("account_deleted_successfully"),variant:"default"}),setTimeout(()=>{(0,j.signOut)({callbackUrl:"/login"})},1e3)):r({title:(null==a?void 0:a.message)||e("error_occurred"),variant:"destructive"})};return(0,l.jsxs)(u.Dialog,{children:[(0,l.jsx)(u.DialogTrigger,{asChild:!0,children:(0,l.jsxs)(i.z,{variant:"transparent",className:"md:w-1/2 w-full ",children:[" ",e("delete_account")]})}),(0,l.jsxs)(u.DialogContent,{className:"w-full max-w-xl  bg-white rounded-md shadow-md p-6",children:[(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center ",children:[(0,l.jsxs)("h3",{className:"text-[32px] font-bold text-text-main ",children:[" ",e("confirm_delete_account")," "]}),(0,l.jsx)("div",{className:"py-[20px]",children:(0,l.jsx)("p",{className:"text-[20px] font-normal text-text-sub  text-center",children:e("delete_account_warning")})})]})}),(0,l.jsxs)("div",{className:"block w-full gap-x-[32px]",children:[(0,l.jsxs)(i.z,{className:" w-full mb-5   ",variant:"destructive",onClick:t,children:[a?(0,l.jsx)(v.Z,{className:"animate-spin mr-2"}):"",e("delete_account")]}),(0,l.jsx)(u.DialogTrigger,{asChild:!0,children:(0,l.jsxs)(i.z,{className:" w-full ",variant:"transparent",children:[" ",e("go_back")," "]})})]})]})]})},g=a(16593),y=a(15291),w=e=>{let{control:r}=e,{data:a}=(0,g.a)({queryKey:["cities"],queryFn:async()=>{let e=await fetch("".concat("http://localhost:3000","/api/cities"));return await e.json()}});return(0,l.jsx)(n.Wi,{name:"city_id",control:r,render:e=>{var r;let{field:i}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsx)(s._,{htmlFor:"city_id",children:"المدينة"}),(0,l.jsxs)(y.Ph,{name:"city_id",value:i.value,onValueChange:i.onChange,children:[(0,l.jsx)(y.i4,{children:(0,l.jsx)(y.ki,{placeholder:"اختر مدينة"})}),(0,l.jsx)(y.Bw,{children:null==a?void 0:null===(r=a.data)||void 0===r?void 0:r.map(e=>(0,l.jsx)(y.Ql,{value:e.id.toString(),children:e.title},e.id))})]}),(0,l.jsx)(n.zG,{})]})}})},N=a(31229),k=a(13590),q=(0,f.$)("060c418937ce60b88c5363ff60e017511ac93a59"),z=()=>{var e,r,a,u,f,h,j,y,z,C;let E=(0,_.useTranslations)(),{data:R}=(0,g.a)({queryKey:["profile"],queryFn:async()=>{try{return await q()}catch(r){console.error("Server fetch failed, trying fallback:",r);let e=await fetch("https://dashboard.fan4d.sa/api/client/auth/profile");if(!e.ok)throw Error("Fallback fetch failed");return await e.json()}}}),{toast:F}=(0,m.pm)(),I=(0,d.useRef)(null),{mutate:D,isPending:G}=(0,x.D)({mutationFn:e=>p(e)}),W=N.z.object({name:N.z.string({required_error:"name is required"}).min(1,"name is required"),email:N.z.string({required_error:"email is required"}).min(1,"email is required"),phone:N.z.string({required_error:"phone is required"}).min(1,"phone is required"),company_name:N.z.string({required_error:"company_name is required"}).min(1,"company_name is required"),job_name:N.z.string({required_error:"job_name is required"}).min(1,"job_name is required"),value_added_certificate:N.z.string({required_error:"value_added_certificate is required"}).min(1,"value_added_certificate is required"),city_id:N.z.string({required_error:"city_id is required"}).min(1,"city_id is required"),gender:N.z.string({required_error:"gender is required"}).min(1,"gender is required"),date_of_birth:N.z.string({required_error:"date_of_birth is required"}).min(1,"date_of_birth is required"),value_added_certificate_file:N.z.string({required_error:"value_added_certificate_file is required"}).min(1,"value_added_certificate_file is required"),files:N.z.any()}),J=(0,c.cI)({values:{name:(null==R?void 0:null===(e=R.data)||void 0===e?void 0:e.name)||"",email:(null==R?void 0:null===(r=R.data)||void 0===r?void 0:r.email)||"",company_name:(null==R?void 0:null===(a=R.data)||void 0===a?void 0:a.company_name)||"",job_name:(null==R?void 0:null===(u=R.data)||void 0===u?void 0:u.job_name)||"",value_added_certificate:(null==R?void 0:null===(f=R.data)||void 0===f?void 0:f.value_added_certificate)||"",value_added_certificate_file:(null==R?void 0:null===(h=R.data)||void 0===h?void 0:h.value_added_certificate_file)||"",city_id:(null==R?void 0:null===(j=R.data)||void 0===j?void 0:j.city_id)||"",phone:(null==R?void 0:null===(y=R.data)||void 0===y?void 0:y.phone)||"",date_of_birth:(null==R?void 0:null===(z=R.data)||void 0===z?void 0:z.date_of_birth)||"",gender:(null==R?void 0:null===(C=R.data)||void 0===C?void 0:C.gender)||""},resolver:(0,k.F)(W)}),P=async e=>{if(!I.current)return;let r=new FormData(I.current);e.files instanceof FileList&&Array.from(e.files).forEach((e,a)=>{e instanceof File&&r.append("value_added_certificate_file[".concat(a,"]"),e)}),D(r,{onSettled:(e,r)=>{r?F({title:E("error_title"),description:r.message||E("error_description"),variant:"destructive"}):(F({title:E("success_title"),description:E("Form-Sent-Successfully"),variant:"default"}),J.reset())}})};return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(n.l0,{...J,children:(0,l.jsx)("form",{onSubmit:J.handleSubmit(P),ref:I,children:(0,l.jsxs)("div",{className:" flex flex-col gap-y-[20px]",children:[(0,l.jsxs)("div",{className:" block md:flex items-center  gap-x-[12px]   ",children:[(0,l.jsx)("div",{className:"md:w-1/2 w-full pb-[10px] md:pb-0 ",children:(0,l.jsx)(n.Wi,{name:"name",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("name_label")," "]}),(0,l.jsx)(t.I,{...r,placeholder:E("name_label")}),(0,l.jsx)(n.zG,{})]})}})}),(0,l.jsx)("div",{className:"md:w-1/2 w-full ",children:(0,l.jsx)(n.Wi,{name:"email",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("contact-us.email")," "]}),(0,l.jsx)(t.I,{...r,placeholder:"example@gmail.com"}),(0,l.jsx)(n.zG,{})]})}})})]}),(0,l.jsxs)("div",{className:"block md:flex items-center  gap-x-[12px]   ",children:[(0,l.jsx)("div",{className:"md:w-1/2 w-full pb-[10px] md:pb-0",children:(0,l.jsx)(n.Wi,{name:"company_name",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("companyName")," "]}),(0,l.jsx)(t.I,{...r,placeholder:E("companyName")}),(0,l.jsx)(n.zG,{})]})}})}),(0,l.jsx)("div",{className:"md:w-1/2 w-full ",children:(0,l.jsx)(n.Wi,{name:"job_name",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("jobTitle"),"  "]}),(0,l.jsx)(t.I,{...r,placeholder:E("jobTitle")}),(0,l.jsx)(n.zG,{})]})}})})]}),(0,l.jsxs)("div",{className:"block md:flex items-center  gap-x-[12px]   ",children:[(0,l.jsx)("div",{className:"md:w-1/2 w-full pb-[10px] md:pb-0",children:(0,l.jsx)(n.Wi,{name:"value_added_certificate",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("vatCertificate")," "]}),(0,l.jsx)(t.I,{...r,placeholder:"5757878"}),(0,l.jsx)(n.zG,{})]})}})}),(0,l.jsx)("div",{className:"md:w-1/2 w-full",children:(0,l.jsx)(n.Wi,{name:"value_added_certificate_file",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("Attach-file")," "]}),r.value?(0,l.jsxs)("div",{className:"space-y-2  ",children:[(0,l.jsx)("a",{href:r.value,target:"_blank",rel:"noopener noreferrer",className:"text-[14px] font-normal leading-[20px] peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"عرض الملف المرفق"}),(0,l.jsx)(i.z,{variant:"ghost",onClick:()=>r.onChange(null),className:"text-red-500 underline",children:"إزالة الملف"})]}):(0,l.jsx)(t.I,{type:"file",placeholder:E("Attach-file"),multiple:!0,name:r.name,onChange:e=>{let a=e.target.files;a&&r.onChange(a)}}),(0,l.jsx)(n.zG,{})]})}})})]}),(0,l.jsxs)("div",{className:"block md:flex items-center  gap-x-[12px]   ",children:[(0,l.jsx)("div",{className:"md:w-1/2 w-full pb-[10px] md:pb-0",children:(0,l.jsx)(w,{control:J.control})}),(0,l.jsx)("div",{className:"md:w-1/2 w-full ",children:(0,l.jsx)(n.Wi,{name:"phone",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("footer.phone")," "]}),(0,l.jsx)(t.I,{...r,placeholder:"+966234569742"}),(0,l.jsx)(n.zG,{})]})}})})]}),(0,l.jsxs)("div",{className:"block md:flex items-center  gap-x-[12px]   ",children:[(0,l.jsx)("div",{className:"md:w-1/2 w-full pb-[10px] md:pb-0",children:(0,l.jsx)(n.Wi,{name:"date_of_birth",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("birthDate")," "]}),(0,l.jsx)(t.I,{...r,id:"date_of_birth",type:"date",placeholder:"1995-08-22",value:r.value?r.value:"",onChange:e=>{let a=e.target.value;r.onChange(a)}}),(0,l.jsx)(n.zG,{})]})}})}),(0,l.jsx)("div",{className:"md:w-1/2 w-full",children:(0,l.jsx)(n.Wi,{name:"gender",control:J.control,render:e=>{let{field:r}=e;return(0,l.jsxs)(n.xJ,{children:[(0,l.jsxs)(s._,{children:[" ",E("gender")," "]}),(0,l.jsxs)(o.E,{value:r.value,onValueChange:e=>r.onChange(e),className:"flex items-center rtl:justify-end ltr:justify-start gap-y-[16px]",children:[(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-[16px] font-normal text-text-sub",children:E("female")}),(0,l.jsx)(o.m,{value:"female"})]})}),(0,l.jsx)("div",{className:"flex",children:(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-[16px] font-normal text-text-sub",children:E("male")}),(0,l.jsx)(o.m,{value:"male"})]})})]}),(0,l.jsx)(n.zG,{})]})}})})]}),(0,l.jsxs)(i.z,{variant:"default",className:"md:w-1/2 w-full ",children:[G?(0,l.jsx)(v.Z,{className:"animate-spin mr-2"}):"",E("saveChanges")]}),(0,l.jsx)(b,{})]})})})})}},42325:function(e,r,a){"use strict";a.d(r,{ck:function(){return S},fC:function(){return P},z$:function(){return T}});var l=a(2265),i=a(6741),n=a(98575),t=a(73966),s=a(66840),d=a(1353),c=a(80886),o=a(29114),u=a(90420),m=a(6718),x=a(71599),f=a(57437),h="Radio",[p,v]=(0,t.b)(h),[j,_]=p(h),b=l.forwardRef((e,r)=>{let{__scopeRadio:a,name:t,checked:d=!1,required:c,disabled:o,value:u="on",onCheck:m,form:x,...h}=e,[p,v]=l.useState(null),_=(0,n.e)(r,e=>v(e)),b=l.useRef(!1),g=!p||x||!!p.closest("form");return(0,f.jsxs)(j,{scope:a,checked:d,disabled:o,children:[(0,f.jsx)(s.WV.button,{type:"button",role:"radio","aria-checked":d,"data-state":N(d),"data-disabled":o?"":void 0,disabled:o,value:u,...h,ref:_,onClick:(0,i.M)(e.onClick,e=>{d||null==m||m(),g&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),g&&(0,f.jsx)(w,{control:p,bubbles:!b.current,name:t,value:u,checked:d,required:c,disabled:o,form:x,style:{transform:"translateX(-100%)"}})]})});b.displayName=h;var g="RadioIndicator",y=l.forwardRef((e,r)=>{let{__scopeRadio:a,forceMount:l,...i}=e,n=_(g,a);return(0,f.jsx)(x.z,{present:l||n.checked,children:(0,f.jsx)(s.WV.span,{"data-state":N(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:r})})});y.displayName=g;var w=e=>{let{control:r,checked:a,bubbles:i=!0,...n}=e,t=l.useRef(null),s=(0,m.D)(a),d=(0,u.t)(r);return l.useEffect(()=>{let e=t.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(s!==a&&r){let l=new Event("click",{bubbles:i});r.call(e,a),e.dispatchEvent(l)}},[s,a,i]),(0,f.jsx)("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:t,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return e?"checked":"unchecked"}var k=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q="RadioGroup",[z,C]=(0,t.b)(q,[d.Pc,v]),E=(0,d.Pc)(),R=v(),[F,I]=z(q),D=l.forwardRef((e,r)=>{let{__scopeRadioGroup:a,name:l,defaultValue:i,value:n,required:t=!1,disabled:u=!1,orientation:m,dir:x,loop:h=!0,onValueChange:p,...v}=e,j=E(a),_=(0,o.gm)(x),[b,g]=(0,c.T)({prop:n,defaultProp:i,onChange:p});return(0,f.jsx)(F,{scope:a,name:l,required:t,disabled:u,value:b,onValueChange:g,children:(0,f.jsx)(d.fC,{asChild:!0,...j,orientation:m,dir:_,loop:h,children:(0,f.jsx)(s.WV.div,{role:"radiogroup","aria-required":t,"aria-orientation":m,"data-disabled":u?"":void 0,dir:_,...v,ref:r})})})});D.displayName=q;var G="RadioGroupItem",W=l.forwardRef((e,r)=>{let{__scopeRadioGroup:a,disabled:t,...s}=e,c=I(G,a),o=c.disabled||t,u=E(a),m=R(a),x=l.useRef(null),h=(0,n.e)(r,x),p=c.value===s.value,v=l.useRef(!1);return l.useEffect(()=>{let e=e=>{k.includes(e.key)&&(v.current=!0)},r=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]),(0,f.jsx)(d.ck,{asChild:!0,...u,focusable:!o,active:p,children:(0,f.jsx)(b,{disabled:o,required:c.required,checked:p,...m,...s,name:c.name,ref:h,onCheck:()=>c.onValueChange(s.value),onKeyDown:(0,i.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,i.M)(s.onFocus,()=>{var e;v.current&&(null===(e=x.current)||void 0===e||e.click())})})})});W.displayName=G;var J=l.forwardRef((e,r)=>{let{__scopeRadioGroup:a,...l}=e,i=R(a);return(0,f.jsx)(y,{...i,...l,ref:r})});J.displayName="RadioGroupIndicator";var P=D,S=W,T=J}},function(e){e.O(0,[2972,5569,7529,1262,3080,6187,7423,3999,6663,6593,7116,820,605,1187,431,2971,2117,1744],function(){return e(e.s=93735)}),_N_E=e.O()}]);