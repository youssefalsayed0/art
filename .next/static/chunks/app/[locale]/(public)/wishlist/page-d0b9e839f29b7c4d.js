(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3514],{56830:function(t,e,a){Promise.resolve().then(a.bind(a,97867)),Promise.resolve().then(a.bind(a,31085)),Promise.resolve().then(a.t.bind(a,72972,23)),Promise.resolve().then(a.bind(a,53927))},53927:function(t,e,a){"use strict";var s=a(57437),i=a(2265),n=a(23340),r=a(15246),o=a(29827),u=a(16593),d=a(21770),c=a(51817),l=a(32852),f=a(49089);e.default=t=>{var e,a;let{productId:p}=t,{toast:S}=(0,n.pm)(),T=(0,o.NL)(),{data:m}=(0,u.a)({queryKey:["wishlist"],queryFn:l.B,staleTime:1/0}),v=null==m?void 0:null===(a=m.data)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.some(t=>t.id===p),[b,E]=(0,i.useState)(v||!1);(0,i.useEffect)(()=>{E(v||!1)},[v,m]);let{mutate:_,isPending:h}=(0,d.D)({mutationFn:async()=>await (0,r.z)(p),onMutate:()=>{E(t=>!t),T.setQueryData(["wishlist"],t=>{if(!t)return t;let e=b?t.data.data.filter(t=>t.id!==p):[...t.data.data,{id:p}];return{...t,data:{...t.data,data:e}}})},onSuccess:t=>{S({title:t.message,description:b?"تمت الإزالة من المفضلة":"تمت الإضافة إلى المفضلة",variant:"default",duration:3e3})},onError:()=>{S({title:"خطأ غير متوقع",description:"حدث خطأ أثناء تحديث قائمة المفضلة.",variant:"destructive",duration:3e3}),E(t=>!t)}});return(0,s.jsx)("button",{onClick:()=>!h&&_(),disabled:h,className:"relative flex items-center justify-center",children:h?(0,s.jsx)(c.Z,{className:"animate-spin text-gray-500",size:24}):(0,s.jsx)(f.$0H,{className:b?"text-red-500":"text-gray-400",size:24})})}},23340:function(t,e,a){"use strict";a.d(e,{pm:function(){return f}});var s=a(2265);let i=0,n=new Map,r=t=>{if(n.has(t))return;let e=setTimeout(()=>{n.delete(t),c({type:"REMOVE_TOAST",toastId:t})},1e6);n.set(t,e)},o=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?r(a):t.toasts.forEach(t=>{r(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},u=[],d={toasts:[]};function c(t){d=o(d,t),u.forEach(t=>{t(d)})}function l(t){let{...e}=t,a=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||s()}}}),{id:a,dismiss:s,update:t=>c({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function f(){let[t,e]=s.useState(d);return s.useEffect(()=>(u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>c({type:"DISMISS_TOAST",toastId:t})}}},15246:function(t,e,a){"use strict";a.d(e,{z:function(){return i}}),a(83079);var s=a(12119),i=(0,s.$)("ecf39fae9dbba50fc32b66f214db420e115e99cb");(0,s.$)("e7f7192c0a76669d000652ee4963976af4a88a4a")},32852:function(t,e,a){"use strict";a.d(e,{B:function(){return s}}),a(83079);var s=(0,a(12119).$)("aabb68d1f7486e99400925116d35913b14a89312")}},function(t){t.O(0,[7699,2972,1262,3999,6593,4751,2971,2117,1744],function(){return t(t.s=56830)}),_N_E=t.O()}]);